import {Webcomic, fetchHtmlPage} from '../common';

export class drmcninja implements Webcomic {
  name = 'drmcninja';
  domain = 'drmcninja.com';

  async startKey() {
    return entries[0].full;
  }

  async endKey() {
    return entries[entries.length - 1].full;
  }

  async urlToKey(url: string) {
    const spl = url.split('comic/');
    if (spl.length != 2) {
      throw new Error("bad url split");
    }
    const short_key = spl[1].split('/')[0];
    const entry = shortToEntry[short_key]
    if (!entry) {
      throw new Error("no entry found for " + short_key);
    }
    return entry.full;
  }

  async keyToUrl(key: string) {
    const entry = fullToEntry[key];
    if (!entry) {
      throw new Error ("no entry found (2)");
    }
    return 'http://drmcninja.com/archives/comic/' + entry.short + '/';
  }

  async keyToImgUrls(key: string) {
    const url = await this.keyToUrl(key);
    let html: string;
    try {
      html = await fetchHtmlPage(url);
    } catch (ex) {
      html = await fetchHtmlPage(url.substring(0, url.length - 1) + '-2/');
    }
    const toFind = '<img src="http://drmcninja.com/comics/';
    const index = html.indexOf(toFind);
    if (index === -1) {
      throw new Error("not found");
    }
    const endIndex = html.indexOf('"', index + 12);
    if (endIndex === -1) {
      throw new Error("not found");
    }
    return [html.substring(index + 10, endIndex)];
  }

  async adjKey(key: string, next: boolean) {
    const entry = fullToEntry[key];
    if (!entry) {
      throw new Error("no entry found (3)");
    }
    let idx = entry.idx;
    idx += (next ? 1 : -1);
    if (idx < 0 || idx >= entries.length) {
      return null;
    } else {
      return entries[idx].full;
    }
  }
}

const comics = [{
    "name": "Issue One Half",
    "posts": ["0p1", "0p2", "0p3", "0p4", "0p5", "0p6", "0p7", "0p8", "0p9", "0p10", "0p11", "0p12", "0p13", "0p14"]
}, {
    "name": "Meet the Doctor and His Friendly Staff",
    "posts": ["1p1", "1p2", "1p3", "1p4", "1p5", "1p6", "1p7", "1p8", "1p9", "1p10", "1p11", "1p12", "1p13", "1p14", "1p15", "1p16", "1p17", "1p18", "1p19", "1p20", "1p21", "1p22"]
}, {
    "name": "So What IS a McNinja?",
    "posts": ["2p1", "2p2", "2p3", "2p4", "2p5", "2p6", "2p7", "2p8", "2p9", "2p10", "2p11", "2p12", "2p13", "2p14", "2p15", "2p16", "2p17", "2p18", "2p19", "2p20", "2p21", "2p22", "2p23", "2p24", "2p25", "2p26", "2p27", "2p28", "2p29", "2p30", "2p31", "2p32", "2p33", "2p34", "2p35", "2p36", "2p37", "2p38", "2p39", "2p40", "2p41", "2p42", "2p43", "2p44", "2p45"]
}, {
    "name": "There is a Raptor in My Office",
    "posts": ["3p1", "3p2", "3p3", "3p4", "3p5", "3p6", "3p7", "3p8", "3p9", "3p10", "3p11", "3p12", "3p13", "3p14", "3p15", "3p16", "3p17", "3p18", "3p19", "3p20", "3p21", "3p22", "3p23", "3p24", "3p25", "3p26", "3p27", "3p28", "3p29", "3p30", "3p31", "3p32", "3p33", "3p34", "3p35", "3p36", "3p37", "3p38", "3p39", "3p40", "3p41", "3p42", "3p43", "3p44", "3p45", "3p46", "3p47", "3p48"]
}, {
    "name": "D.A.R.E To Resist Ninja Drugs and Ninja Violence Part 1",
    "posts": ["4p1", "4p2", "4p3", "4p4", "4p5", "4p6", "4p7", "4p8", "4p9", "4p10", "4p11", "4p12", "4p13", "4p14", "4p15", "4p16", "4p17", "4p18", "4p19", "4p20", "4p21", "4p22", "4p23", "4p24", "4p25", "4p26", "4p27", "4p28", "4p29", "4p30", "4p31", "4p32", "4p33", "4p34", "4p35", "4p36", "4p37", "4p38", "4p39", "4p40", "4p41", "4p42"]
}, {
    "name": "D.A.R.E To Resist Ninja Drugs and Ninja Violence Part 2",
    "posts": ["5p1", "5p2", "5p3", "5p4", "5p5", "5p6", "5p7", "5p8", "5p9", "5p10", "5p11", "5p12", "5p13", "5p14", "5p15", "5p16", "5p17", "5p18", "5p19", "5p20", "5p21", "5p22", "5p23", "5p24", "5p25", "5p26", "5p27", "5p28", "5p29", "5p30", "5p31", "5p32", "5p33", "5p34", "5p35", "5p36", "5p37", "5p38", "5p39", "5p40", "5p41", "5p42", "5p43", "5p44", "5p45", "5p46", "5p47", "5p48", "5p49", "5p50", "5p51", "5p52"]
}, {
    "name": "Dr. McGuestravaganza '07",
    "posts": ["7p1", "7p2", "7p3", "7p4", "7p5", "7p6", "7p7", "7p8", "7p9", "7p10", "7p11", "7p12"]
}, {
    "name": "Revenge of the Hundred Dead Ninja",
    "posts": ["8p1", "8p2", "8p3", "8p4", "8p5", "8p6", "8p7", "8p8", "8p9", "8p10", "8p11", "8p12", "8p13", "8p14", "8p15", "8p16", "8p17", "8p18", "8p19", "8p20", "8p21", "8p22", "8p23", "8p24", "8p25", "8p26", "8p27", "8p28", "8p29", "8p30", "8p31", "8p32", "8p33", "8p34", "8p35", "8p36", "8p37", "8p38", "8p39", "8p40", "8p41", "8p42", "8p43", "8p44", "8p45", "8p46", "8p47", "8p48", "8p49"]
}, {
    "name": "I Told You That Story So I Could Tell You This One",
    "posts": ["9p1", "9p2", "9p3", "9p4", "9p5", "9p6", "9p7", "9p8", "9p9", "9p10", "9p11", "9p12", "9p13", "9p14", "9p15", "9p16", "9p17", "9p18", "9p19", "9p20", "9p21", "9p22", "9p23", "9p24", "9p25", "9p26", "9p27", "9p28", "9p29", "9p30", "9p31", "9p32", "9p33", "9p34"]
}, {
    "name": "Spooky Stuff",
    "posts": ["10p1", "10p2", "10p3", "10p4", "10p5", "10p6", "10p7", "10p8", "10p9", "10p10", "10p11", "10p12", "10p13", "10p14", "10p15", "10p16", "10p17", "10p18", "10p19", "10p20", "10p21", "10p22", "10p23", "10p24", "10p25", "10p26", "10p27", "10p28", "10p29", "10p30", "10p31", "10p32", "10p33", "10p34", "10p35", "10p36", "10p37", "10p38", "10p39", "10p40", "10p41", "10p42", "10p43", "10p44", "10p45", "10p46", "10p47", "10p48", "10p49", "10p50", "10p51", "10p52", "10p53", "10p54", "10p55", "10p56"]
}, {
    "name": "Punch Dracula",
    "posts": ["11p1", "11p2", "11p3", "11p4", "11p5", "11p6", "11p7", "11p8", "11p9", "11p10", "11p11", "11p12", "11p13", "11p14", "11p15", "11p16", "11p17", "11p18", "11p19", "11p20", "11p21", "11p22", "11p23", "11p24", "11p25", "11p26", "11p27", "11p28", "11p29", "11p30", "11p31", "11p32", "11p33", "11p34", "11p35", "11p36", "11p37", "11p38", "11p39", "11p40", "11p41", "11p42", "11p43", "11p44", "11p45", "11p46", "11p47", "11p48", "11p49", "11p50", "11p51", "11p52", "11p53", "11p54", "11p55", "11p56"]
}, {
    "name": "Dr. McGuestravaganza '08",
    "posts": ["12p1", "12p2", "12p3", "12p4", "12p5"]
}, {
    "name": "Monster Mart",
    "posts": ["13p1", "13p2", "13p3", "13p4", "13p5", "13p6", "13p7", "13p8", "13p9", "13p10", "13p11", "13p12", "13p13", "13p14", "13p15", "13p16", "13p17", "13p18", "13p19", "13p20", "13p21", "13p22", "13p23", "13p24", "13p25", "13p26", "13p27", "13p28", "13p29", "13p30", "13p31", "13p32", "13p33", "13p34", "13p35", "13p36", "13p37", "13p38", "13p39", "13p40", "13p41", "13p42", "13p43", "13p44", "13p45", "13p46", "13p47"]
}, {
    "name": "Death Volley",
    "posts": ["14p1", "14p2", "14p3", "14p4", "14p5", "14p6", "14p7", "14p8", "14p9", "14p10", "14p11", "14p12", "14p13", "14p14", "14p15", "14p16", "14p17", "14p18", "14p19", "14p20", "14p21", "14p22", "14p23", "14p24", "14p25", "14p26", "14p27", "14p28", "14p29", "14p30", "14p31", "14p32", "14p33", "14p34", "14p35", "14p36", "14p37", "14p38", "14p39", "14p40", "14p41", "14p42", "14p43", "14p44", "14p45", "14p46", "14p47", "14p48", "14p49", "14p50", "14p51", "14p52", "14p53", "14p54", "14p55", "14p56", "14p57", "14p58", "14p59", "14p60", "14p61", "14p62", "14p63", "14p64", "14p65", "14p66", "14p67", "14p68", "14p69", "14p70", "14p71", "14p72"]
}, {
    "name": "Doc Gets Rad",
    "posts": ["15p1", "15p2", "15p3", "15p4", "15p5", "15p6", "15p7", "15p8", "15p9", "15p10", "15p11", "15p12", "15p13", "15p14", "15p15", "15p16", "15p17", "15p18", "15p19", "15p20", "15p21", "15p22", "15p23", "15p24", "15p25", "15p26", "15p27", "15p28", "15p29", "15p30", "15p31", "15p32", "15p33", "15p34", "15p35", "15p36", "15p37", "15p38", "15p39", "15p40", "15p41", "15p42", "15p43", "15p44", "15p45", "15p46", "15p47", "15p48", "15p49", "15p50", "15p51", "15p52", "15p53", "15p54", "15p55", "15p56", "15p57", "15p58", "15p59", "15p60", "15p61", "15p62", "15p63", "15p64", "15p65", "15p66", "15p67", "15p68", "15p69", "15p70", "15p71", "15p72", "15p73"]
}, {
    "name": "Dr. McGueststravaganza '09",
    "posts": ["16p1", "16p2", "16p3", "16p4", "16p5"]
}, {
    "name": "Army of One",
    "posts": ["17p1", "17p2", "17p3", "17p4", "17p5", "17p6", "17p7", "17p8", "17p9", "17p10", "17p11", "17p12", "17p13", "17p14", "17p15", "17p16", "17p17", "17p18", "17p19", "17p20", "17p21", "17p22", "17p23", "17p24", "17p25", "17p26", "17p27", "17p28", "17p29", "17p30", "17p31", "17p32", "17p33", "17p34", "17p35", "17p36", "17p37", "17p38", "17p39", "17p40", "17p41", "17p42", "17p43", "17p44", "17p45", "17p46", "17p47", "17p48", "17p49", "17p50", "17p51", "17p52", "17p53", "17p54", "17p55", "17p56", "17p57", "17p58", "17p59", "17p60", "17p61", "17p62", "17p63", "17p64", "17p65", "17p66", "17p67", "17p68", "17p69", "17p70", "17p71", "17p72", "17p73", "17p74", "17p75", "17p76", "17p77", "17p78", "17p79", "17p80", "17p81", "17p82", "17p83", "17p84", "17p85", "17p86", "17p87", "17p88", "17p89"]
}, {
    "name": "Judy Gets a Kitten",
    "posts": ["18p1", "18p2", "18p3", "18p4", "18p5", "18p6"]
}, {
    "name": "Stolen Pizza - Stolen Lives",
    "posts": ["19p1", "19p2", "19p3", "19p4", "19p5", "19p6"]
}, {
    "name": "Space Savers",
    "posts": ["20p1", "20p2", "20p3", "20p4", "20p5", "20p6", "20p7", "20p8", "20p9", "20p10", "20p11", "20p12", "20p13", "20p14", "20p15", "20p16", "20p17", "20p18", "20p19", "20p20", "20p21", "20p22", "20p23", "20p24", "20p25", "20p26", "20p27", "20p28", "20p29", "20p30", "20p31", "20p32", "20p33", "20p34", "20p35", "20p36", "20p37", "20p38", "20p39", "20p40", "20p41", "20p42", "20p43", "20p44", "20p45", "20p46", "20p47", "20p48", "20p49", "20p50", "20p51", "20p52", "20p53", "20p54", "20p55", "20p56", "20p57", "20p58", "20p59", "20p60", "20p61", "20p62", "20p63", "20p64", "20p65", "20p66", "20p67", "20p68", "20p69", "20p70", "20p71", "20p72", "20p73", "20p74", "20p75", "20p76", "20p77", "20p78", "20p79"]
}, {
    "name": "Futures Trading",
    "posts": ["21p01", "21p02", "21p03", "21p04", "21p05", "21p06", "21p07", "21p08", "21p09", "21p10", "21p11", "21p12", "21p13", "21p14", "21p15", "21p16", "21p17", "21p18", "21p19", "21p20", "21p21", "21p22", "21p23", "21p24", "21p25", "21p26", "21p27", "21p28", "21p29", "21p30", "21p31", "21p32", "21p33", "21p34", "21p35", "21p36", "21p37", "21p38", "21p39", "21p40", "21p41", "21p42", "21p43", "21p44", "21p45", "21p46", "21p47", "21p48", "21p49", "21p50", "21p51", "21p52", "21p53", "21p54", "21p55", "21p56", "21p57", "21p58", "21p59", "21p60", "21p61", "21p62", "21p63", "21p64", "21p65", "21p66", "21p67", "21p68", "21p69", "21p70", "21p71", "21p72", "21p73", "21p74", "21p75", "21p76", "21p77", "21p78", "21p79", "21p80", "21p81", "21p82", "21p83", "21p84", "21p85", "21p86", "21p87", "21p88", "21p89", "21p90", "21p91", "21p92", "21p93", "21p94", "21p95", "21p96", "21p97", "21p98", "21p99", "21p100", "21p101", "21p102", "21p103", "21p104", "21p105", "21p106", "21p107"]
}, {
    "name": "PREVIEW: Beyond Winter Wonderdome",
    "posts": ["22p01", "22p02", "22p03", "22p04", "22p05"]
}, {
    "name": "AWOL MD",
    "posts": ["23p01", "23p02", "23p03", "23p04", "23p05", "23p06", "23p07", "23p08", "23p09", "23p10", "23p11", "23p12", "23p13", "23p14", "23p15", "23p16", "23p17", "23p18", "23p19", "23p20", "23p21", "23p22", "23p23", "23p24", "23p25", "23p26", "23p27", "23p28", "23p29", "23p30", "23p31", "23p32", "23p33", "23p34", "23p35", "23p36", "23p37", "23p38", "23p39", "23p40", "23p41", "23p42", "23p43", "23p44", "23p45", "23p46", "23p47", "23p48", "23p49", "23p50", "23p51", "23p52", "23p53", "23p54", "23p55", "23p56", "23p57", "23p58", "23p59", "23p60", "23p61", "23p62", "23p63", "23p64", "23p65", "23p66", "23p67", "23p68", "23p69", "23p70", "23p71", "23p72", "23p73", "23p74", "23p75", "23p76", "23p77", "23p78", "23p79", "23p80", "23p81", "23p82", "23p83", "23p84", "23p85", "23p86", "23p87", "23p88", "23p89", "23p90", "23p91", "23p92", "23p93", "23p94", "23p95", "23p96"]
}, {
    "name": "A Cumberland Ninja in King Radical's Court",
    "posts": ["25p01", "25p02", "25p03", "25p04", "25p05", "25p06", "25p07", "25p08", "25p09", "25p10", "25p11", "25p12", "25p13", "25p14", "25p15", "25p16", "25p17", "25p18", "25p19", "25p20", "25p21", "25p22", "25p23", "25p24", "25p25", "25p26", "25p27", "25p28", "25p29", "25p30", "25p31", "25p32", "25p33", "25p34", "25p35", "25p36", "25p37", "25p38", "25p39", "25p40", "25p41", "25p42", "25p43", "25p44", "25p45", "25p46", "25p47", "25p48", "25p49", "25p50", "25p51", "25p52", "25p53", "25p54", "25p55", "25p56", "25p57", "25p58", "25p59", "25p60", "25p61", "25p62", "25p63", "25p64", "25p65", "25p66", "25p67", "25p68", "25p69", "25p70", "25p71", "25p72", "25p73", "25p74", "25p75", "25p76", "25p77", "25p78", "25p79", "25p80", "25p81", "25p82", "25p83", "25p84", "25p85", "25p86", "25p87", "25p88", "25p89", "25p90", "25p91", "25p92", "25p93", "25p94", "25p95", "25p96", "25p97", "25p98", "25p99", "25p100", "25p101", "25p102", "25p103", "25p104", "25p105", "25p106", "25p107", "25p108", "25p109", "25p110", "25p111", "25p112", "25p113", "25p114"]
}, {
    "name": "All the King's Dirtbikes and All the King's Men",
    "posts": ["26p1", "26p2", "26p3", "26p4", "26p5", "26p6", "26p7", "26p8", "26p9", "26p10", "26p11", "26p12", "26p13", "26p14", "26p15", "26p16", "26p17", "26p18", "26p19", "26p20", "26p21", "26p22", "26p23", "26p24", "26p25", "26p26", "26p27", "26p28", "26p29", "26p30", "26p31", "26p32", "26p33", "26p34", "26p35", "26p36", "26p37", "26p38", "26p39", "26p40", "26p41", "26p42", "26p43", "26p44", "26p45", "26p46", "26p47", "26p48", "26p49", "26p50", "26p51", "26p52", "26p53", "26p54", "26p55", "26p56", "26p57", "26p58", "26p59", "26p60", "26p61", "26p62", "26p63", "26p64", "26p65", "26p66", "26p67", "26p68", "26p69", "26p70", "26p71", "26p72", "26p73", "26p74", "26p75", "26p76", "26p77", "26p78", "26p79", "26p80", "26p81", "26p82", "26p83", "26p84", "26p85", "26p86"]
}, {
    "name": "Why a Gorilla?",
    "posts": ["27p01", "27p02", "27p03", "27p04", "27p05", "27p06", "27p07", "27p08", "27p09", "27p10", "27p11", "27p12", "27p13", "27p14", "27p15", "27p16", "27p17", "27p18", "27p19", "27p20", "27p21", "27p22", "27p23", "27p24", "27p25", "27p26", "27p27", "27p28", "27p29", "27p30", "27p31", "27p32", "27p33", "27p34", "27p35", "27p36", "27p37", "27p38", "27p39", "27p40", "27p41", "27p42", "27p43", "27p44", "27p45", "27p46", "27p47", "27p48", "27p49", "27p50", "27p51", "27p52", "27p53", "27p54", "27p55", "27p56", "27p57", "27p58", "27p59", "27p60", "27p61", "27p62", "27p63", "27p64", "27p65", "27p66", "27p67", "27p68", "27p69", "27p70", "27p71", "27p72", "27p73", "27p74", "27p75", "27p76", "27p77", "27p78", "27p79", "27p80", "27p81", "27p82", "27p83", "27p84"]
}, {
    "name": "A Bad Enough Dude",
    "posts": ["28p01", "28p02", "28p03", "28p04", "28p05", "28p06", "28p07", "28p08", "28p09", "28p10", "28p11", "28p12", "28p13", "28p13", "28p15", "28p16", "28p17", "28p18", "28p19", "28p20", "28p21", "28p22", "28p23", "28p24", "28p25", "28p26", "28p27", "28p28", "28p29", "28p30", "28p31", "28p32", "28p33", "28p34", "28p35", "28p36", "28p37", "28p38"]
}, {
    "name": "First Generation Ninja American",
    "posts": ["29p01", "29p02", "29p03", "29p04", "29p05", "29p06", "29p07", "29p08", "29p09", "29p10", "29p11", "29p12", "29p13", "29p14", "29p15", "29p16", "29p17", "29p18", "29p19", "29p20", "29p21", "29p22", "29p23", "29p24", "29p25", "29p26", "29p27", "29p28", "29p29", "29p30", "29p31", "29p32", "29p33", "29p34", "29p35", "29p36", "29p37", "29p38", "29p39", "29p40", "29p41", "29p42", "29p43", "29p44", "29p45", "29p46", "29p47", "29p48", "29p49", "29p50", "29p51", "29p52", "29p53", "29p54", "29p55", "29p56", "29p57"]
}, {
    "name": "Paleontologists, Politicians and Prologue",
    "posts": ["30p01", "30p02", "30p03", "30p04", "30p05", "30p06", "30p07", "30p08", "30p09", "30p10", "30p11", "30p12", "30p13", "30p14", "30p15", "30p16", "30p17", "30p18", "30p19", "30p20", "30p21", "30p22", "30p23", "30p24", "30p25", "30p26", "30p27", "30p28", "30p29", "30p30", "30p31", "30p32", "30p33", "30p34", "30p35", "30p36", "30p37", "30p38", "30p39", "30p40", "30p41", "30p42", "30p43", "30p44", "30p45", "30p46", "30p47", "30p48", "30p49", "30p50", "30p51", "30p52", "30p53", "30p54", "30p55"]
}, {
    "name": "The End: Part 1",
    "posts": ["31p01", "31p02", "31p03", "31p04", "31p05", "31p06", "31p07", "31p08", "31p09", "31p10", "31p11", "31p12", "31p13", "31p14", "31p15", "31p16", "31p17", "31p18", "31p19", "31p20", "31p21", "31p22", "31p23", "31p24", "31p25", "31p26", "31p27", "31p28", "31p29", "31p30", "31p31", "31p32", "31p33", "31p34", "31p35", "31p36", "31p37", "31p38", "31p39", "31p40", "31p41", "31p42", "31p43", "31p44", "31p45", "31p46", "31p47", "31p48", "31p49", "31p50", "31p51", "31p52", "31p53", "31p54", "31p55", "31p56", "31p57", "31p58", "31p59", "31p60", "31p61", "31p62"]
}, {
    "name": "Dr. McGuestravaganza '16",
    "posts": ["32p01", "32p02", "32p03", "32p04", "32p05"]
}, {
    "name": "The End: Part 2",
    "posts": ["33p01", "33p02", "33p03", "33p04", "33p05", "33p06", "33p07", "33p08", "33p09", "33p10", "33p11", "33p12", "33p13", "33p14", "33p15", "33p16", "33p17", "33p18", "33p19", "33p20", "33p21", "33p22", "33p23", "33p24", "33p25", "33p26", "33p27", "33p28", "33p29", "33p30", "33p31", "33p32", "33p33", "33p34", "33p35", "33p36", "33p37", "33p38", "33p39", "33p40", "33p41", "33p42", "33p43", "33p44", "33p45", "33p46", "33p47", "33p48", "33p49", "33p50", "33p51", "33p52", "33p53", "33p54", "33p55", "33p56", "33p57", "33p58", "33p59", "33p60", "33p61", "33p62", "33p63", "33p64", "33p65", "33p66", "33p67", "33p68", "33p69", "33p70", "33p71", "33p72", "33p73", "33p74", "33p75", "33p76", "33p77", "33p78", "33p79", "33p80", "33p81", "33p82", "33p83", "33p84", "33p85", "33p86", "33p87", "33p88", "33p89", "33p90", "33p91", "33p92", "33p93", "33p94", "33p95", "33p96", "33p97", "33p98", "33p99", "33p100", "33p101", "33p102", "33p103", "33p104", "33p105", "33p106", "33p107", "33p108", "33p109", "33p110", "33p111", "33p112", "33p113", "33p114", "33p115", "33p116", "33p117", "33p118", "33p119", "33p120", "33p121", "33p122", "33p123", "33p124", "33p125", "33p126", "33p127", "33p128", "33p129", "33p130", "33p131", "33p132", "33p133", "33p134", "33p135", "33p136", "33p137", "33p138", "33p139", "33p140", "33p141", "33p142", "33p143", "33p144", "33p145", "33p146", "33p147"]
}];

interface Entry {
  full: string;
  short: string;
  idx: number;
};

const entries: Entry[] = [];
const fullToEntry: {[full: string]: Entry} = {};
const shortToEntry: {[short: string]: Entry} = {};

for (const series of comics) {
  let name = series.name;
  name = name.toLowerCase().replace(/ /g, '-');
  let prefix = '';
  for (let i = 0; i < name.length; i++) {
    if ((name[i] >= 'a' && name[i] <= 'z') || (name[i] >= '0' && name[i] <= '9') || name[i] == '-') {
      prefix += name[i];
    }
  }

  for (const post of series.posts) {
    const entry: Entry = {
      full: prefix + '-' + post,
      short: post,
      idx: entries.length,
    };
    fullToEntry[entry.full] = entry;
    shortToEntry[entry.short] = entry;
    entries.push(entry);
  }
}
